{% extends 'admin.twig' %}

{% block content %}
    <h2>{{ 'Funnels_ManageFunnels'|translate }}</h2>
    <p>
        <a href="{{ linkTo({'module': 'Funnels', 'action': 'edit'}) }}" class="btn btn-primary">{{ 'Funnels_CreateFunnel'|translate }}</a>
    </p>
    
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>{{ 'Funnels_FunnelName'|translate }}</th>
                <th>{{ 'Funnels_Active'|translate }}</th>
                <th>{{ 'Funnels_Steps'|translate }}</th>
                <th>{{ 'Funnels_Updated'|translate }}</th>
                <th>{{ 'Funnels_Actions'|translate }}</th>
            </tr>
        </thead>
        <tbody>
            {% for funnel in funnels %}
            <tr>
                <td>{{ funnel.name }}</td>
                <td>
                    {% if funnel.active %}
                        <span class="status-active">{{ 'Funnels_Active'|translate }}</span>
                    {% else %}
                        <span class="status-inactive">{{ 'Funnels_Inactive'|translate }}</span>
                    {% endif %}
                </td>
                <td>{{ funnel.steps|length }}</td>
                <td>{{ funnel.updated_date }}</td>
                <td>
                    <a href="{{ linkTo({'module': 'Funnels', 'action': 'edit', 'idFunnel': funnel.idfunnel}) }}">{{ 'General_Edit'|translate }}</a>
                    &nbsp;|&nbsp;
                    <a href="{{ linkTo({'module': 'Funnels', 'action': 'duplicate', 'idFunnel': funnel.idfunnel}) }}" onclick="return confirm('Duplicate this funnel?');">Duplicate</a>
                    &nbsp;|&nbsp;
                    <a href="{{ linkTo({'module': 'Funnels', 'action': 'delete', 'idFunnel': funnel.idfunnel}) }}" onclick="return confirm('{{ 'Funnels_ConfirmDelete'|translate }}');">{{ 'General_Delete'|translate }}</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5">{{ 'Funnels_NoFunnelsFound'|translate }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
